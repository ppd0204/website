var OSMBuildings=function(){function f(a,b){var d=a[0]-b[0],e=a[1]-b[1];return d*d+e*e}function K(a){for(var b=0,d=0,e=0,g=a.length-3;e<g;e+=2)b+=a[e],d+=a[e+1];a=(a.length-2)/2;return[b/a<<0,d/a<<0]}function v(a){var b,d,e,g,f=0,n,s;n=0;for(s=a.length-3;n<s;n+=2)b=a[n],d=a[n+1],e=a[n+2],g=a[n+3],f+=b*g-e*d;if("CW"===(0<f/2?"CW":"CCW"))return a;b=[];for(d=a.length-2;0<=d;d-=2)b.push(a[d],a[d+1]);return b}var W=W||Array,Ba=Ba||Array,h=Math,Ka=h.exp,La=h.log,Ma=h.sin,Na=h.cos,ua=h.tan,Oa=h.atan,oa=
h.min,va=h.max,Ca=document,S,ba=function(a){var b,d,e;if(0===a.s)b=d=e=a.l;else{e=0.5>a.l?a.l*(1+a.s):a.l+a.s-a.l*a.s;var g=2*a.l-e;a.h/=360;b=T(g,e,a.h+1/3);d=T(g,e,a.h);e=T(g,e,a.h-1/3)}return new z(255*b<<0,255*d<<0,255*e<<0,a.a)},T=function(a,b,d){0>d&&(d+=1);1<d&&(d-=1);return d<1/6?a+6*(b-a)*d:0.5>d?b:d<2/3?a+6*(b-a)*(2/3-d):a},z=function(a,b,d,e){this.r=a;this.g=b;this.b=d;this.a=4>arguments.length?1:e},h=z.prototype;h.toString=function(){return"rgba("+[this.r<<0,this.g<<0,this.b<<0,this.a.toFixed(2)].join()+
")"};h.setLightness=function(a){var b=z.toHSLA(this);b.l*=a;b.l=Math.min(1,Math.max(0,b.l));return ba(b)};h.setAlpha=function(a){return new z(this.r,this.g,this.b,this.a*a)};z.parse=function(a){var b;a+="";if(~a.indexOf("#")&&(b=a.match(/^#?(\w{2})(\w{2})(\w{2})(\w{2})?$/)))return new z(parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),b[4]?parseInt(b[4],16)/255:1);if(b=a.match(/rgba?\((\d+)\D+(\d+)\D+(\d+)(\D+([\d.]+))?\)/))return new z(parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),b[4]?
parseFloat(b[5]):1);if(b=a.match(/hsla?\(([\d.]+)\D+([\d.]+)\D+([\d.]+)(\D+([\d.]+))?\)/))return ba({h:parseInt(b[1],10),s:parseFloat(b[2]),l:parseFloat(b[3]),a:b[4]?parseFloat(b[5]):1})};z.toHSLA=function(a){var b=a.r/255,d=a.g/255,e=a.b/255,g=Math.max(b,d,e),f=Math.min(b,d,e),n,s=(g+f)/2,h;if(g===f)n=f=0;else{h=g-f;f=0.5<s?h/(2-g-f):h/(g+f);switch(g){case b:n=(d-e)/h+(d<e?6:0);break;case d:n=(e-b)/h+2;break;case e:n=(b-d)/h+4}n/=6}return{h:360*n,s:f,l:s,a:a.a}};S=z;var Da,h=Math,L=h.PI,m=h.sin,
x=h.cos,ca=h.tan,da=h.asin,ea=h.atan2,F=L/180,N=23.4397*F;Da=function(a,b,d){d=F*-d;b*=F;a=a.valueOf()/864E5-0.5+2440588-2451545;var e=F*(357.5291+0.98560028*a),g=F*(1.9148*m(e)+0.02*m(2*e)+3E-4*m(3*e)),g=e+g+102.9372*F+L,e=da(m(0)*x(N)+x(0)*m(N)*m(g)),g=ea(m(g)*x(N)-ca(0)*m(N),x(g));d=F*(280.16+360.9856235*a)-d-g;return{altitude:da(m(b)*m(e)+x(b)*x(e)*x(d)),azimuth:ea(m(d),x(d)*m(b)-ca(e)*x(b))-L/2}};var Ea,H=function(a){var b=parseFloat(a);return~a.indexOf("m")?b<<0:~a.indexOf("yd")?b*Pa<<0:~a.indexOf("ft")?
b*Fa<<0:~a.indexOf("'")?(a=a.split("'"),a[0]*Fa+a[1]*Qa<<0):b<<0},w=function(a){a=a.toLowerCase();return"#"===a[0]?a:Ra[a]||null},I=function(a){a=a.toLowerCase();return"#"===a[0]?a:Sa[Ta[a]||a]||null},Ga=function(a){return(a=a.tags)&&!a.landuse&&(a.building||a["building:part"])&&(!a.layer||0<=a.layer)},Ha=function(a){if(a){for(var b=[],d,e=0,g=a.length;e<g;e++)d=G[a[e]],b.push(d[0],d[1]);b[b.length-2]!==b[0]&&b[b.length-1]!==b[1]&&b.push(b[0],b[1]);if(!(8>b.length))return b}},fa=function(a){var b=
0,d=0;a.height&&(b=H(a.height));!b&&a["building:height"]&&(b=H(a["building:height"]));!b&&a.levels&&(b=a.levels*O<<0);!b&&a["building:levels"]&&(b=a["building:levels"]*O<<0);a.min_height&&(d=H(a.min_height));!d&&a["building:min_height"]&&(d=H(a["building:min_height"]));!d&&a.min_level&&(d=a.min_level*O<<0);!d&&a["building:min_level"]&&(d=a["building:min_level"]*O<<0);var e,g;a["building:material"]&&(e=I(a["building:material"]));a["building:facade:material"]&&(e=I(a["building:facade:material"]));a["building:cladding"]&&
(e=I(a["building:cladding"]));a["building:color"]&&(e=w(a["building:color"]));a["building:colour"]&&(e=w(a["building:colour"]));a["roof:material"]&&(g=I(a["roof:material"]));a["building:roof:material"]&&(g=I(a["building:roof:material"]));a["roof:color"]&&(g=w(a["roof:color"]));a["roof:colour"]&&(g=w(a["roof:colour"]));a["building:roof:color"]&&(g=w(a["building:roof:color"]));a["building:roof:colour"]&&(g=w(a["building:roof:colour"]));return{height:b,minHeight:d,wallColor:e,roofColor:g}},Ia=function(a,
b,d){a={id:a,footprint:v(d)};b.height&&(a.height=b.height);b.minHeight&&(a.minHeight=b.minHeight);b.wallColor&&(a.wallColor=b.wallColor);b.roofColor&&(a.roofColor=b.roofColor);X.push(a)},Pa=0.9144,Fa=0.3048,Qa=0.0254,O=3,Ra={black:"#000000",white:"#ffffff",brown:"#8b4513",green:"#00ff7f",grey:"#bebebe",gray:"#bebebe",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",yellow:"#ffff00",red:"#ff0000",blue:"#0000ff"},Ta={asphalt:"tar_paper",bitumen:"tar_paper",block:"stone",bricks:"brick",glas:"glass",glassfront:"glass",
grass:"plants",masonry:"stone",granite:"stone",panels:"panel",paving_stones:"stone",plastered:"plaster",rooftiles:"roof_tiles",roofingfelt:"tar_paper",sandstone:"stone",sheet:"canvas",sheets:"canvas",shingle:"tar_paper",shingles:"tar_paper",slates:"slate",steel:"metal",tar:"tar_paper",tent:"canvas",thatch:"plants",tile:"roof_tiles",tiles:"roof_tiles"},Sa={brick:"#cc7755",bronze:"#ffeecc",canvas:"#fff8f0",concrete:"#999999",copper:"#a0e0d0",glass:"#e8f8f8",gold:"#ffcc00",plants:"#009933",metal:"#aaaaaa",
panel:"#fff8f0",plaster:"#999999",roof_tiles:"#f08060",silver:"#cccccc",slate:"#666666",stone:"#996666",tar_paper:"#333333",wood:"#deb887"},G,Y,X;Ea=function(a){G={};Y={};X=[];for(var b,d=0,e=a.length;d<e;d++)switch(b=a[d],b.type){case "node":G[b.id]=[b.lat,b.lon];break;case "way":var g=void 0,f=void 0;Ga(b)?(g=fa(b.tags),(f=Ha(b.nodes))&&Ia(b.id,g,f)):(g=b.tags)&&(!g.highway&&!g.railway&&!g.landuse)&&(Y[b.id]=b);break;case "relation":var h=g=g=void 0,f=void 0;if(Ga(b)&&("multipolygon"===b.tags.type||
"building"===b.tags.type)){a:{for(var g=b.members,f=void 0,h=0,s=g.length;h<s;h++)if(f=g[h],"way"===f.type&&"outer"===f.role){g=f;break a}g=void 0}if(g&&(b=fa(b.tags),g=Y[g.ref]))if(h=fa(g.tags),f=Ha(g.nodes)){s=void 0;for(s in b)h[s]||(h[s]=b[s]);Ia(g.id,h,f)}}}return X};var ga=Math.PI,Ja=ga/2,Ua=ga/4,Va=180/ga,Wa=256,Xa="latitude",Ya="longitude",h=function(){function a(a,b){var c={};a/=F;b/=F;c[Xa]=0>=b?90:1<=b?-90:Va*(2*Oa(Ka(ga*(1-2*b)))-Ja);c[Ya]=360*(1===a?1:(a%1+1)%1)-180;return c}function b(a,
b,c){function d(a){if("XDomainRequest"in window&&a!==j.readyState&&(j.readyState=a,j.onreadystatechange))j.onreadystatechange()}a=a.replace(/\{ *([\w_]+) *\}/g,function(a,Za){return b[Za]||a});var j="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;j.onerror=function(){j.status=500;j.statusText="Error";d(4)};j.ontimeout=function(){j.status=408;j.statusText="Timeout";d(4)};j.onprogress=function(){d(3)};j.onload=function(){j.status=200;j.statusText="Ok";d(4)};j.onreadystatechange=function(){4===
j.readyState&&j.status&&!(200>j.status||299<j.status)&&c&&j.responseText&&c(JSON.parse(j.responseText))};d(0);j.open("GET",a);d(1);j.send(null);d(2);return j}function d(){ha.render();pa.render();e()}function e(){A.clearRect(0,0,s,m);if(!(P<H||ia)){var a,b,c,d,j,e,wa,y,k,$a=pa.MAX_HEIGHT,p=[ja+B,ka+C],u,q,l,t,U,r;D.renderItems.sort(function(a,b){return f(b.center,p)/b.height-f(a.center,p)/a.height});a=0;for(b=D.renderItems.length;a<b;a++)if(j=D.renderItems[a],!(j.height<=$a)){q=!1;e=j.footprint;u=
[];c=0;for(d=e.length-1;c<d;c+=2)u[c]=y=e[c]-B,u[c+1]=k=e[c+1]-C,q||(q=0<y&&y<s&&0<k&&k<m);if(q){c=1>j.scale?j.height*j.scale:j.height;e=Z/(Z-c);j.minHeight&&(c=1>j.scale?j.minHeight*j.scale:j.minHeight,wa=Z/(Z-c));y=[];c=0;for(d=u.length-3;c<d;c+=2)k=u[c],l=u[c+1],q=u[c+2],t=u[c+3],U=h(k,l,e),r=h(q,t,e),j.minHeight&&(l=h(k,l,wa),t=h(q,t,wa),k=l.x,l=l.y,q=t.x,t=t.y),(q-k)*(U.y-l)>(U.x-k)*(t-l)&&(A.fillStyle=k<q&&l<t||k>q&&l>t?j.altColor||la:j.wallColor||I,g([q,t,k,l,U.x,U.y,r.x,r.y])),y[c]=U.x,y[c+
1]=U.y;A.fillStyle=j.roofColor||ma;A.strokeStyle=j.altColor||la;g(y,!0)}}}}function g(a,b){if(a.length){A.beginPath();A.moveTo(a[0],a[1]);for(var c=2,d=a.length;c<d;c+=2)A.lineTo(a[c],a[c+1]);A.closePath();b&&A.stroke();A.fill()}}function h(a,b,c){return{x:(a-ja)*c+ja<<0,y:(b-ka)*c+ka<<0}}function n(a){P=a;F=Wa<<P;a=P;var b=H,c=O;a=oa(va(a,b),c);M=1-oa(va(0+0.3*((a-b)/(c-b)),0),0.3);I=J.setAlpha(M)+"";la=w.setAlpha(M)+"";ma=$.setAlpha(M)+""}var s=0,m=0,z=0,x=0,B=0,C=0,P,F,A,J=new S(200,190,180),w=
J.setLightness(0.8),$=J.setLightness(1.2),I=J+"",la=w+"",ma=$+"",N,M=1,H=15,O=20,T,ja,ka,Z,ia,L=new Date,aa={},G={add:function(a,b){aa[a]={data:b,time:Date.now()}},get:function(a){return aa[a]&&aa[a].data},purge:function(){L.setMinutes(L.getMinutes()-5);for(var a in aa)aa[a].time<L&&delete aa[a]}},D,fa=function(a){return function(b){X(b,a)}},X=function(a,b){if(a){var c;if("FeatureCollection"===a.type){c=a.features;var d,j,e,g,f=[],k,h,p,u,q,l,t,m;d=0;for(j=c.length;d<j;d++)if(k=c[d],"Feature"===k.type&&
(h=k.geometry,k=k.properties,"LineString"===h.type&&(l=p.length-1,p[0][0]===p[l][0]&&p[0][1]===p[l][1]&&(p=h.coordinates)),"Polygon"===h.type&&(p=h.coordinates),"MultiPolygon"===h.type&&(p=h.coordinates[0]),p)){if(k.color||k.wallColor)u=k.color||k.wallColor;k.roofColor&&(q=k.roofColor);h=p[0];m=[];t=k.height;e=l=0;for(g=h.length;e<g;e++)m.push(h[e][1],h[e][0]),l+=t||h[e][2]||0;e={id:k.id||m[0]+","+m[1],footprint:v(m)};l&&(e.height=l/h.length<<0);k.minHeight&&(e.minHeight=k.minHeight);u&&(e.wallColor=
u);q&&(e.roofColor=q);f.push(e)}c=f}else a.osm3s&&(c=Ea(a.elements));b&&G.add(b,c);Y(c,!0)}},Y=function(a,b){var c,e,j,g,f,h,k=[],m,p,u,q,l,t,r,s,n,z=O-P;j=0;for(g=a.length;j<g;j++)if(n=s=r=null,m=a[j],u=3*(m.height||15)>>z)if(q=3*m.minHeight>>z,!(q>T)){p=m.footprint;l=new W(p.length);f=0;for(h=p.length-1;f<h;f+=2)c=p[f+1],e=oa(1,va(0,0.5-La(ua(Ua+Ja*p[f]/180))/ga/2)),c=(c/360+0.5)*F<<0,e=e*F<<0,l[f]=c,l[f+1]=e;f=l;h=f.length/2;p=new Ba(h);l=0;c=h-1;var v=e=void 0,x=void 0,w=void 0,A=[],E=[],H=[];
for(p[l]=p[c]=1;c;){v=0;for(e=l+1;e<c;e++){var x=f[2*e],I=f[2*e+1],B=f[2*l],C=f[2*l+1],J=f[2*c],L=f[2*c+1],Q=J-B,R=L-C,G=void 0;if(0!==Q||0!==R)G=((x-B)*Q+(I-C)*R)/(Q*Q+R*R),1<G?(B=J,C=L):0<G&&(B+=Q*G,C+=R*G);Q=x-B;R=I-C;x=Q*Q+R*R;x>v&&(w=e,v=x)}2<v&&(p[w]=1,A.push(l),E.push(w),A.push(w),E.push(c));l=A.pop();c=E.pop()}for(e=0;e<h;e++)p[e]&&H.push(f[2*e],f[2*e+1]);l=H;if(!(8>l.length)){if(m.wallColor&&(t=S.parse(m.wallColor)))r=t.setAlpha(M),s=""+r.setLightness(0.8),r=""+r;if(m.roofColor&&(t=S.parse(m.roofColor)))n=
""+t.setAlpha(M);k.push({id:m.id,footprint:l,height:oa(u,T),minHeight:q,wallColor:r,altColor:s,roofColor:n,center:K(l)})}}g=0;for(m=k.length;g<m;g++)j=k[g],qa[j.id]||(j.scale=b?0:1,na.renderItems.push(k[g]),qa[j.id]=1);N||(N=setInterval(function(){for(var a,b=!1,c=0,e=D.renderItems.length;c<e;c++)a=D.renderItems[c],1>a.scale&&(a.scale+=0.1,1<a.scale&&(a.scale=1),b=!0);d();b||(clearInterval(N),N=null)},33))},xa,qa={},na={renderItems:[],load:function(a){xa=a||"http://overpass-api.de/api/interpreter?data=[out:json];(way[%22building%22]({s},{w},{n},{e});node(w);way[%22building:part%22=%22yes%22]({s},{w},{n},{e});node(w);relation[%22building%22]({s},{w},{n},{e});way(r);node(w););out;";
na.update()},update:function(){if(xa&&!(15>P)){var e=a(B,C),d=a(B+s,C+m),c=0.0075*(e.latitude/0.0075<<0)+0.0075,f=0.015*(d.longitude/0.015<<0)+0.015,d=0.0075*(d.latitude/0.0075<<0),e=0.015*(e.longitude/0.015<<0);G.purge();na.renderItems=[];qa={};for(var j,g,h;d<=c;d+=0.0075)for(j=e;j<=f;j+=0.015)h=d+","+j,(g=G.get(h))?Y(g):b(xa,{n:(1E4*(d+0.0075)<<0)/1E4,e:(1E4*(j+0.015)<<0)/1E4,s:(1E4*d<<0)/1E4,w:(1E4*j<<0)/1E4},fa(h))}},set:function(a){na.renderItems=[];qa={};X(a)}};D=na;var ha,sa=function(a,b,
c){return{x:a+ra.x*c,y:b+ra.y*c}},r,ba=!0,ca=new S(0,0,0),da=null,ra={x:0,y:0},ya={setContext:function(a){r=a;ya.setDate((new Date).setHours(10))},enable:function(a){ba=!!a},render:function(){var b,d,c,e;r.clearRect(0,0,s,m);if(ba&&!(P<H||ia))if(b=a(B+z,C+x),b=Da(da,b.latitude,b.longitude),!(0>=b.altitude)){d=1/ua(b.altitude);c=0.4/d;ra.x=Na(b.azimuth)*d;ra.y=Ma(b.azimuth)*d;ca.a=c;e=ca+"";var f,g,h,y,k,n,p,u,q,l,t,v,w=[];r.beginPath();b=0;for(d=D.renderItems.length;b<d;b++){g=D.renderItems[b];u=
!1;h=g.footprint;p=[];c=0;for(f=h.length-1;c<f;c+=2)p[c]=k=h[c]-B,p[c+1]=n=h[c+1]-C,u||(u=0<k&&k<s&&0<n&&n<m);if(u){h=1>g.scale?g.height*g.scale:g.height;g.minHeight&&(y=1>g.scale?g.minHeight*g.scale:g.minHeight);k=null;c=0;for(f=p.length-3;c<f;c+=2)n=p[c],q=p[c+1],u=p[c+2],l=p[c+3],t=sa(n,q,h),v=sa(u,l,h),g.minHeight&&(q=sa(n,q,y),l=sa(u,l,y),n=q.x,q=q.y,u=l.x,l=l.y),(u-n)*(t.y-q)>(t.x-n)*(l-q)?(1===k&&r.lineTo(n,q),k=0,c||r.moveTo(n,q),r.lineTo(u,l)):(0===k&&r.lineTo(t.x,t.y),k=1,c||r.moveTo(t.x,
t.y),r.lineTo(v.x,v.y));r.closePath();w.push(p)}}r.fillStyle=e;r.fill();r.globalCompositeOperation="destination-out";r.beginPath();b=0;for(d=w.length;b<d;b++){y=w[b];r.moveTo(y[0],y[1]);c=2;for(f=y.length;c<f;c+=2)r.lineTo(y[c],y[c+1]);r.lineTo(y[0],y[1]);r.closePath()}r.fillStyle="#00ff00";r.fill();r.globalCompositeOperation="source-over"}},setDate:function(a){da=a;ya.render()}};ha=ya;var pa,E,ea={MAX_HEIGHT:8,setContext:function(a){E=a},render:function(){E.clearRect(0,0,s,m);if(!(P<H||ia)){var a,
b,c,d,e,f,g,h,k;E.beginPath();a=0;for(b=D.renderItems.length;a<b;a++)if(c=D.renderItems[a],!(c.height>ea.MAX_HEIGHT)){k=!1;e=c.footprint;h=[];c=0;for(d=e.length-1;c<d;c+=2)h[c]=f=e[c]-B,h[c+1]=g=e[c+1]-C,k||(k=0<f&&f<s&&0<g&&g<m);if(k){c=0;for(d=h.length-3;c<d;c+=2)k=h[c],e=h[c+1],c?E.lineTo(k,e):E.moveTo(k,e);E.closePath()}}E.fillStyle=ma;E.strokeStyle=la;E.stroke();E.fill()}}};pa=ea;var za,Aa=function(){var a=Ca.createElement("CANVAS");a.style.webkitTransform="translate3d(0,0,0)";a.style.imageRendering=
"optimizeSpeed";a.style.position="absolute";a.style.left=0;a.style.top=0;var b=a.getContext("2d");b.lineCap="round";b.lineJoin="round";b.lineWidth=1;b.mozImageSmoothingEnabled=!1;b.webkitImageSmoothingEnabled=!1;ta.push(a);V.appendChild(a);return b},V=Ca.createElement("DIV");V.style.pointerEvents="none";V.style.position="absolute";V.style.left=0;V.style.top=0;var ta=[];ha.setContext(Aa());pa.setContext(Aa());A=Aa();za={appendTo:function(a){a.appendChild(V);return V},setSize:function(a,b){for(var c=
0,d=ta.length;c<d;c++)ta[c].width=a,ta[c].height=b}};this.setStyle=function(a){a=a||{};if(a.color||a.wallColor)J=S.parse(a.color||a.wallColor),I=J.setAlpha(M)+"",w=J.setLightness(0.8),la=w.setAlpha(M)+"",$=J.setLightness(1.2),ma=$.setAlpha(M)+"";a.roofColor&&($=S.parse(a.roofColor),ma=$.setAlpha(M)+"");void 0!==a.shadows&&ha.enable(a.shadows);d()};this.setCamOffset=function(a,b){ja=z+a;ka=m+b};this.setMaxZoom=function(a){O=a};this.setDate=function(a){ha.setDate(a)};this.appendTo=function(a){return za.appendTo(a)};
this.loadData=function(a){D.load(a)};this.setData=function(a){D.set(a)};this.onMoveEnd=function(){d();D.update()};this.onZoomEnd=function(a){ia=!1;n(a.zoom);D.update();d()};this.onZoomStart=function(){ia=!0;d()};this.setOrigin=function(a,b){B=a;C=b};this.setSize=function(a,b){s=a;m=b;z=s/2<<0;x=m/2<<0;ja=z;ka=m;Z=s/(1.5/(window.devicePixelRatio||1))/ua(45)<<0;za.setSize(s,m);T=Z-50};this.setZoom=n;this.render=e};h.VERSION="0.1.8a";h.ATTRIBUTION='&copy; <a href="http://osmbuildings.org">OSM Buildings</a>';
return h}();
OpenLayers.Layer.Buildings=OpenLayers.Class(OpenLayers.Layer,{CLASS_NAME:"OpenLayers.Layer.Buildings",name:"OSM Buildings",attribution:OSMBuildings.ATTRIBUTION,isBaseLayer:!1,alwaysInRange:!0,dxSum:0,dySum:0,initialize:function(f){f=f||{};f.projection="EPSG:900913";OpenLayers.Layer.prototype.initialize.call(this,this.name,f)},setOrigin:function(){var f=this.map.getLonLatFromPixel(new OpenLayers.Pixel(0,0)),K=this.map.resolution,v=this.maxExtent,W=Math.round((f.lon-v.left)/K),f=Math.round((v.top-f.lat)/
K);this.osmb.setOrigin(W,f)},setMap:function(f){this.map||OpenLayers.Layer.prototype.setMap.call(this,f);this.osmb||(this.osmb=new OSMBuildings,this.container=this.osmb.appendTo(this.div));this.osmb.setSize(this.map.size.w,this.map.size.h);this.osmb.setZoom(this.map.zoom);this.setOrigin()},removeMap:function(f){this.container.parentNode.removeChild(this.container);OpenLayers.Layer.prototype.removeMap.call(this,f)},onMapResize:function(){OpenLayers.Layer.prototype.onMapResize.call(this);this.osmb.onResize({width:this.map.size.w,
height:this.map.size.h})},moveTo:function(f,K,v){f=OpenLayers.Layer.prototype.moveTo.call(this,f,K,v);if(!v){v=parseInt(this.map.layerContainerDiv.style.left,10);var W=parseInt(this.map.layerContainerDiv.style.top,10);this.div.style.left=-v+"px";this.div.style.top=-W+"px"}this.setOrigin();this.dySum=this.dxSum=0;this.osmb.setCamOffset(this.dxSum,this.dySum);if(K)this.osmb.onZoomEnd({zoom:this.map.zoom});else this.osmb.onMoveEnd();return f},moveByPx:function(f,K){this.dxSum+=f;this.dySum+=K;var v=
OpenLayers.Layer.prototype.moveByPx.call(this,f,K);this.osmb.setCamOffset(this.dxSum,this.dySum);this.osmb.render();return v},setStyle:function(f){this.osmb.setStyle(f);return this},setDate:function(f){this.osmb.setDate(f);return this},load:function(f){this.osmb.loadData(f);return this},geoJSON:function(f){this.osmb.setData(f);return this}});
